<!DOCTYPE html>
<html>
<head>
    <title>JmoAI Neural Link</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; display: flex; flex-direction: column; padding: 20px; }
        .row { display: flex; gap: 10px; margin-bottom: 10px; }
        .view-box { flex: 2; border: 1px solid #0f0; height: 400px; background: #050505; position: relative; }
        #log { flex: 1; height: 400px; border: 1px solid #0f0; overflow-y: auto; padding: 10px; font-size: 12px; }
        #mouseZone { width: 100%; height: 100px; border: 1px dashed #0f0; text-align: center; line-height: 100px; cursor: crosshair; }
        .btn { background: #0f0; color: #000; border: none; padding: 10px; cursor: pointer; font-weight: bold; margin: 2px; }
    </style>
</head>
<body>
    <h1>JMO_AI // NEURAL_LINK</h1>
    <div class="row">
        <div class="view-box">
            <iframe id="cam" style="width:100%; height:100%; border:none;"></iframe>
        </div>
        <div id="log"></div>
    </div>

    <div class="row">
        <div style="flex: 1;">
            <input id="u" value="JmoAI"> <button class="btn" onclick="join()">CONNECT</button>
            <button class="btn" style="background:red" onclick="socket.emit('disconnectBot')">DISCONNECT</button>
            <br><br>
            <button class="btn" onclick="socket.emit('interact', 'break')">MINE (LEFT CLICK)</button>
            <button class="btn" onclick="socket.emit('interact', 'use')">INTERACT (RIGHT CLICK)</button>
            <button class="btn" onclick="socket.emit('lookNearest')">LOCK ON PLAYER</button>
        </div>
        <div style="flex: 1;">
            <div id="mouseZone">LOOK CONTROL (DRAG HERE)</div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        function join() {
            socket.emit('startBot', { host: 'mc.sealcentral.co', username: document.getElementById('u').value });
            setTimeout(() => { 
                document.getElementById('cam').src = window.location.href.replace('8080', '3001');
            }, 3000);
        }

        // Mouse Look Logic
        let yaw = 0, pitch = 0;
        document.getElementById('mouseZone').onmousemove = (e) => {
            yaw -= e.movementX * 0.01;
            pitch -= e.movementY * 0.01;
            socket.emit('look', { yaw, pitch });
        };

        const keys = { 'w': 'forward', 's': 'back', 'a': 'left', 'd': 'right', ' ': 'jump', 'Shift': 'sneak' };
        window.onkeydown = (e) => { if(keys[e.key]) socket.emit('control', { key: keys[e.key], state: true }); };
        window.onkeyup = (e) => { if(keys[e.key]) socket.emit('control', { key: keys[e.key], state: false }); };

        socket.on('log', m => { const l=document.getElementById('log'); l.innerHTML += `<div>> ${m}</div>`; l.scrollTop = l.scrollHeight; });
    </script>
</body>
</html>
